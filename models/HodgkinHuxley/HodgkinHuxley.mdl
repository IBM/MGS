#ifndef HodgkinHuxley_MDL
#define HodgkinHuxley_MDL
#include "../../nti/include/MaxComputeOrder.h"

Interface BufferedAmplitudeProducer {
	//  dyn_var_t []* amplitude;
	dyn_var_t* currentAmplitude;
	dyn_var_t* delayedAmplitude;
}

Interface BufferedTimeProducer {
	dyn_var_t []* pulseTime;
	dyn_var_t* currentPulseTime;
	dyn_var_t* delayedPulseTime;
}

Interface AmplitudeProducer {
	dyn_var_t* amplitude;
}

Interface PreviousAmplitudeProducer {
	dyn_var_t* previousAmplitude;
}

Interface CurrentProducer {
  dyn_var_t* current;
}

Interface CurrentArrayProducer {
  dyn_var_t []* currents;
}

Interface CaCurrentProducer {
  dyn_var_t* current;
}

Interface CaCurrentArrayProducer {
  dyn_var_t []* currents;
}

Interface CaERCurrentProducer {
  dyn_var_t* current;
}

Interface CaERCurrentArrayProducer {
  dyn_var_t []* currents;
}
Interface ReversalPotentialProducer {
  dyn_var_t* reversalPotential;
}

Interface ReversalPotentialArrayProducer {
  dyn_var_t []* reversalPotentials;
}

Interface ConductanceProducer {
  dyn_var_t* conductance;
}

Interface ConductanceArrayProducer {
  dyn_var_t []* conductanceArray;
}

Interface MaximumConductanceProducer {
  dyn_var_t* maximumConductance;
}

Interface MaximumConductanceArrayProducer {
  dyn_var_t []* maximumConductanceArray;
}

Interface VoltageProducer {
   dyn_var_t* voltage;
}

Interface VoltageArrayProducer {
   dyn_var_t []* voltageArray;
}

Interface CaConcentrationProducer {
   dyn_var_t* Ca;
}

Interface CaConcentrationArrayProducer {
   dyn_var_t []* CaConcentrations;
}

Interface CaERConcentrationProducer {
   dyn_var_t* Ca;
}

Interface CaERConcentrationArrayProducer {
   dyn_var_t []* CaConcentrations;
}

Interface MgConcentrationProducer { 
   dyn_var_t* Mg;
}

Interface NaConcentrationProducer {
   dyn_var_t* Na;
}

Interface KConcentrationProducer {
   dyn_var_t* K;
}

Interface WeightProducer {
   dyn_var_t* w;
}

Interface PlasticityProducer {
   dyn_var_t* w;
}

Interface PlasticityToggleProducer {
   int* plasticityToggle;
}

Interface TemperatureProducer {
   dyn_var_t* T;
}

Interface KetamineProducer {
   dyn_var_t* Ketamine;
}

Interface SurfaceAreaProducer {
   dyn_var_t* surfaceArea; // [um^2]
}

Interface ConnectionSurfaceAreaProducer {
   dyn_var_t* surfaceArea; // [um^2]
}

Interface IndexProducer {
   int* index;
}

Interface IndexArrayProducer {
   int* []* indexArray;
}

Interface GlycineProducer {
   dyn_var_t* Glycine;
}

Constant ExtracellularMedium Implements NaConcentrationProducer, 
    KConcentrationProducer, CaConcentrationProducer, MgConcentrationProducer, 
    TemperatureProducer, KetamineProducer, GlycineProducer
{// NOTE: Be careful when modifying the unit
  dyn_var_t Na; // [mM] extracellular concetrations expressed by ion name alone
  dyn_var_t K;  // [mM]
  dyn_var_t Mg; // [mM]
  dyn_var_t T;  // [K]
  dyn_var_t Ketamine; // 0 .. 1 (fraction of ketamine block)
  dyn_var_t Ca; // [uM]
  dyn_var_t Glycine; // [uM]
  NaConcentrationProducer.Na << &Na;
  KConcentrationProducer.K << &K;
  CaConcentrationProducer.Ca << &Ca;
  MgConcentrationProducer.Mg << &Mg;
  TemperatureProducer.T << &T;
  KetamineProducer.Ketamine << &Ketamine;
  GlycineProducer.Glycine << &Glycine;
}

#endif
